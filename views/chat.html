<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <title>LET'S CHAT</title>
        <link rel="stylesheet" type="text/css" href="style/base.css" />
        <link rel="stylesheet" type="text/css" href="style/chat.css" />
    </head>
    <body>

        <header class="header">
            <div class="header-container">
                <div class="header-title">LET'S CHAT</div>
                <nav class="header-nav">
                    <div class="header-nav_logout">Logout</div>
                </nav>
            </div>
        </header>

        <main class="main">
            <main class="chat-window">
                <div class="chat-header">
                    <div class="chat-header_user">
                        <div class="chat-header_icon"></div>
                        <div class="chat-header_name"></div>
                    </div>
                    <div class="chat-header_partner">
                        <div class="chat-header_setting"></div>
                        <div class="chat-partner_icon"></div>
                        <div class="chat-partner_name"></div>                        
                    </div>
                    <div class="callButton"></div>
                </div>
            
                <div class="chat-message">
                    <div class="chat-messages_list">
                        <div class="chat-messagesList">
                            <div class="messagesList-check">
                                <!-- <div class="showMessageList">
                                    <div class="showFriendIcon">圖片</div>
                                    <div class="showData">
                                        <div class="showData_container">
                                            <div class="showFriendName">暱稱</div>
                                            <div class="showFriendTime">時間</div>
                                        </div>
                                        <div class="showFriendMessage">個人訊息</div>
                                    </div>
                                </div> -->
                            </div>
                        </div> <!-- 列表用 JS 自動生成 -->
                        <div class="chat-friendList"> <!-- 列表用 JS 自動生成 -->
                            <div class="friendList-check"></div>
                        </div>
                        <div class="chat-addFriend">
                            <div>
                                <div class="addFriend-search">
                                    <span class="chat-addFriend_input"><input type="text" class="friend_input" placeholder="輸入Email搜尋好友"></span>
                                    <!-- <span><button class="addFriend-button">Search</button></span> -->
                                    <span><div class="addFriend-button"></div></span>
                                </div>
                                <div class="addFriend-result"></div>
                            </div>
                            <div class="addFriend-title">待確認好友邀請</div>
                            <div class="addFriend-check"></div>
                        </div>
                    </div>                
                    <div class="chat-messages_content">
                        <!-- <div class="chat-index">
                            <div class="chat-index_pic"></div>
                            <div class="chat-index_word">開始聊天吧！</div>
                        </div> -->
                        <div class="chat-index">
                            <div class="chat-index_pic"></div>
                            <div class="chat-index_word">開始聊天吧！</div>
                        </div>
                        <div class="chat-messages_setting">
                            <div class="setting">
                                <div>
                                    <!-- <div class="setting-pic"></div>
                                    <div class="change-setting-pic">修改</div> -->
                                    <div class="setting-pic" id="profilePic">
                                        <div class="change-setting-pic" id="changeProfilePic"></div>
                                    </div>
                                    <!-- 一次只能選擇一個檔案，默認設定為  multiple="false" -->
                                    <input type="file" id="fileInput" style="display: none;">
                                </div>
                                <div class="data-setting">
                                    <div class="data-setting_name">
                                        <div class="data-name">暱稱</div>
                                        <div class="name-content" contenteditable="false">尚未設定</div>
                                        <div class="data-name_change"> </div>
                                    </div>
                                    <div class="data-setting_email">
                                        <div class="data-email">Email</div>
                                        <!-- <div class="email-content"></div>
                                        <div class="data-email_change"  id="changeSettingPic" contenteditable="true">修改</div>                                    -->
                                        <div class="email-content" contenteditable="false">example@email.com</div>
                                        <div class="data-email_change" id="changeSettingPic"> </div>

                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="ul"></div>
                    </div>
                </div>
            
                <div class="chat-footer">
                    <div class="chat-footer_bar">
                        <!-- <div class="icon_friendList">好友列表</div>
                        <div class="icon_messagesList">訊息列表</div>
                        <div class="icon_addFriend">加好友</div> -->
                        <div class="icon_friendList"></div>
                        <div class="icon_messagesList"></div>
                        <div class="icon_addFriend"></div>
                        <div class="icon_setting"></div>
                        <!-- HTML 中的通話按鈕和結束按鈕 -->
                        <!-- <button id="startCallButton">開始</button>
                        <button id="endCallButton" style="display: none;">結束</button> -->
                        <!-- <video id="localVideo" autoplay playsinline></video>
                        <video id="remoteVideo" autoplay playsinline></video> -->
                        <!-- <button id="startButton">Start Call</button> -->
                        <!-- <button id="hangupButton">Hang Up</button> -->
                    </div>
                    <div class="chat-input_container">
                        <!-- <div class="chat-footer_input"><input type="text" class="chat-input" placeholder="Type your message"></div>
                        <button class="chat-button">Send</button> -->
                    </div>
                </div>
            </main>
        </main>

        <!-- 实现通话中弹出小窗口的功能 -->
        <!-- <div id="callModal" class="modal">
            <div class="modal-content">
                <video id="localVideo" autoplay playsinline></video>
                <video id="remoteVideo" autoplay playsinline></video>
                <button id="hangupButton">Hang Up</button>
            </div>
        </div> -->

        <!-- Modal for Call Request -->
        <div id="callRequestModal" class="modal" style="display: none;">
            <div class="modal-content">
                <p>Calling...</p>
                <button id="cancelCallButton">Cancel Call</button>
            </div>
        </div>

        <!-- Modal for Call Response -->
        <div id="callResponseModal" class="modal" style="display: none;">
            <div class="modal-content">
                <p class="comingCallName">Incoming Call</p>
                <button id="acceptCallButton">Accept</button>
                <button id="rejectCallButton">Reject</button>
            </div>
        </div>

        <!-- Modal for Call in Progress -->
        <div id="callInProgressModal" class="modal" style="display: none;">
            <div class="modal-content">
                <p>Call in Progress</p>
                <button id="hangupButton">Hang Up</button>
            </div>
        </div>

        <!-- Audio elements to display local and remote audio -->
        <audio id="localAudio" autoplay></audio>
        <audio id="remoteAudio" autoplay></audio>

        <!-- 在 HTML 中添加一個用於顯示音頻的元素 -->
        <!-- <audio id="friendAudio" autoplay></audio> -->

        <footer class="footer">
            <div class="footer-container">COPYRIGHT © 2023 LET'S CHAT</div>
        </footer>

        <!-- 引用 socket.io 的客戶端套件 -->
        <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
        <!-- 引用 Peer.js 的客戶端套件，要自己找最新版本 -->
        <script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.1/dist/peerjs.min.js"></script>       
        <script src="script/base.js"></script>
        <script src="script/chat.js"></script>
    </body>
</html>